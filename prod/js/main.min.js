let Birds=function(){function s(e){d.moveTo(e[0].x,e[0].y);for(let o=1;o<e.length;o++)d.lineTo(e[o].x,e[o].y)}let e={number:13},l,h,o,d,n,m=0,t=.4,a=10,c=-1,r,i,u={current:1,target:1},y={x:.5,y:.5,z:.5},f=function(e){["x","y","z"].forEach(function(o){.003<Math.abs(e.move[o])&&(e.move[o]*=.99)}),m%e.ownMove.t==0&&(e.ownMove.x=(.5-Math.random())/3,e.ownMove.y=(.5-Math.random())/3),e.move.x+=t*(y.x-e.pos.x+e.ownMove.x)*e.speed,e.move.y+=t*(y.y-e.pos.y+e.ownMove.y)*e.speed,e.move.z+=t*(y.z-e.pos.z)*e.speed},M=function(o){d.fillStyle="hsl("+m%360+", 100%, 90%)";let t={x:o.pos.x*l,y:o.pos.y*h,z:1.5*o.pos.z},n=(l+h)/200*t.z*u.current,a=Math.atan2(o.move.y*h,o.move.x*l);d.lineWidth=1;function e(o,e){return{x:t.x+Math.cos(a+o*Math.PI*2)*n*e,y:t.y+Math.sin(a+o*Math.PI*2)*n*e}}r=o,i=e(.5,1.3),r.lines[2*c]=i.x,r.lines[2*c+1]=i.y,d.beginPath(),s([e(0,1.2),e(.01,.9),e(.05,.7),e(.47,.9),e(.45,1.5),e(.47,1.2),e(.5,1.5),e(.52,1.2),e(.55,1.5),e(.53,.9),e(-.25,.5),e(-.05,.7),e(-.01,.9),e(0,1.2)]),d.fill();var r=Math.sin(o.wing),i=(r+1)/2;d.beginPath(),s([e(0,.5),e(-.15,i),e(-.25,3*i-1),e(-.4,.5),e(0,0)]),d.fill()},p=function(){for(let o=a;2<=o;o--){d.beginPath(),d.lineWidth=o/a*(l+h)/1e3,d.strokeStyle="hsla("+(m+o)%360+", 100%, 50%, "+o/a+")";let e=(c+o)%a,t=(c+o+a-1)%a;n.forEach(function(o){0!==o.lines[2*t]&&0!==o.lines[2*e]&&(d.moveTo(o.lines[2*e],o.lines[2*e+1]),d.lineTo(o.lines[2*t],o.lines[2*t+1]))}),d.stroke()}},x=function(){d.fillStyle="hsla("+m%360+", 100%, 90%, 0.01)",d.beginPath(),n.forEach(function(o){d.moveTo(o.pos.x*l,o.pos.y*h),d.arc(o.pos.x*l,o.pos.y*h,o.pos.z*(l+h)/30,0,2*Math.PI)}),d.fill(),d.closePath(),d.globalCompositeOperation="source-over"};let v=function(){m++,u.current+=(u.target-u.current)/100,d.clearRect(0,0,l,h),n.forEach(function(o){f(o),o.wing+=.1+.3*o.wingAdd*t,o.pos.x+=o.move.x,o.pos.y+=o.move.y,o.pos.z+=o.move.z}),p(),c=(c+1)%a,n.forEach(function(o){M(o)}),x(),window.requestAnimationFrame(v)};this.run=function(){setInterval(function(){y.x=Math.random(),y.y=Math.random(),u.target=.5+Math.random()},1e3),o=document.getElementsByTagName("canvas")[0],d=o.getContext("2d"),l=window.innerWidth,h=window.innerHeight,o.setAttribute("width",l),o.setAttribute("height",h),(r=d.createLinearGradient(0,0,0,h/2)).addColorStop(0,"#000"),r.addColorStop(1,"#110"),(i=d.createLinearGradient(0,h/2,0,h)).addColorStop(0,"#000"),i.addColorStop(1,"#001"),n=[];for(let o=0;o<e.number;o++)n.push({wing:Math.random(),wingAdd:Math.random(),speed:(.2+.8*Math.random())/2e3,pos:{x:.25+.5*Math.random(),y:.25+.5*Math.random(),z:Math.random()},move:{x:(.5-Math.random())/100,y:(.5-Math.random())/100,z:0},moveCache:{x:0,y:0},ownMove:{t:20+100*Math.random()|0,x:0,y:0},tar:{x:.5,y:.5},lines:new Float32Array(2*a)});v()}},b=new Birds;b.run();